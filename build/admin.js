document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".kaigen-remove-key").forEach(function(e){e.addEventListener("click",function(){const e=this.getAttribute("data-provider"),n=document.getElementById("kaigen_"+e+"_api_key");n&&(n.value=""),t()})});const e=document.querySelector('select[name="kaigen_provider"]');function n(){const n=e.value;if(document.querySelectorAll('input[id*="kaigen_"][id*="_api_key"]').forEach(function(e){const n=e.closest("tr");n&&n.classList.add("kaigen-hidden")}),n){const e=document.getElementById("kaigen_"+n+"_api_key");if(e){const n=e.closest("tr");n&&n.classList.remove("kaigen-hidden")}}t()}function t(){const n=e?e.value:"",t=document.getElementById("kaigen-provider-warning-row");if(t&&t.remove(),n){const t=document.getElementById("kaigen_"+n+"_api_key");if(t&&!t.value.trim()){const t=document.createElement("div");t.className="notice notice-warning inline kaigen-warning",t.innerHTML="<p><strong>Warning:</strong> You have selected "+function(n){const t=e.querySelector('option[value="'+n+'"]');return t?t.textContent:n}(n)+" but no API key is set. Please enter your API key below.</p>";const i=e.closest("tr");if(i){const e=document.createElement("tr");e.id="kaigen-provider-warning-row";const n=document.createElement("td");n.colSpan=2,n.appendChild(t),e.appendChild(n),i.parentNode.insertBefore(e,i.nextSibling)}}}}e&&(n(),e.addEventListener("change",n)),document.querySelectorAll('input[id*="kaigen_"][id*="_api_key"]').forEach(function(e){e.addEventListener("input",function(){setTimeout(t,300)})}),e&&t()});